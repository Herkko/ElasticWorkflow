<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Raphael</title>
       	<link media="screen" href="ElastFlo.css" rel="stylesheet">
        <script src="@routes.Assets.at("javascripts/raphael.js")"></script>

<script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")"></script>

	<script src="raphael.js"></script>
        <script src="jquery-1.7.1.min.js"></script>

	
    </head>
    <body>   
    </body>


<script> 
	    
	  var RaphaelElement;
	  var jsonlista = {type:"circle", cx: 50, cy:100, r: 25, fill:"#585858 "};
	      RaphaelElement = Raphael(100, 100, 500, 500);
	      readJSON();
	      RaphaelElement.add([jsonlista]);
	   
	      
	

	  function readJSON(){
	      $.getJSON('/json', function(data){jsonlista = data;});
	  }
	<script> 
		var RaphaelElement;
		RaphaelElement = Raphael(100, 100, "100%", "100%");


	/*	var jsonlista = {type:"circle", cx: 50, cy:100, r: 25, fill:"#585858 "};
	    var box1 = RaphaelElement.rect(10,10,400,200,1);
	    RaphaelElement.add([jsonlista]);
	*/

	    readJSON();
      
		//if more than one models exists, their elements will overlap
		//will draw many swimlanes now
		function readJSON(){
			$.getJSON('/json', function(data){ 
				draw(data);
	        });
		}

	    function InitProcess(){
	    	//Functio lukee läpi "process" nimisen listan ja luo uuden prosessin  
	    	var startPoint = RaphaelElement.circle(50, 100, 25);
	    	startPoint.attr("fill", "#585858 ");
	    	startPoint.attr("stroke", "#080808 ");	    		    	
	    }

	    function createElement(){
	    // funktio iteroi läpi "Elements" nimisen listan ja luo uudet elementit jokaisesta.
	    	var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);
	    	circle1.animate(anim.delay(5000));
	    	var anim =  RaphaelElement.circle(320, 240, 60).animation({fill: "#223fa3", stroke: "#000", "stroke-width": 80, "stroke-opacity": 0.5}, 800);
	    }	   

	    function draw(elementList) {
	      for (var i = 0; i < elementList.length; i++) { 
	    	  var elem = elementList[i];
	    	  if(elem.type == "circle") startElement(elem.cx, elem.cy, 25);
	    	  else if(elem.type == "rect") RaphaelElement.rect(elem.cx,elem.cy,600,200,1);
	      }
	    }
	    
	    function startElement(x, y, r) {
              var s = RaphaelElement.set()           		  	
              s.push(
            		  RaphaelElement.circle(x, y, r).attr({ fill:"#585858"}),
            		  RaphaelElement.text(x, y, "Start").attr({fill: "white", "font-size": 15})
              );
              RaphaelElement.set(s).drag(move, start);
        }


	    //moving bugs if many start elements exist
	    function start() {
	    	this.ox = this.attr("cx");
	    	this.oy = this.attr("cx");
        } 

	    function move(dx, dy) {
            this.attr({cx: this.ox + dx, cy: this.oy + dy});
        };
	    
        </script>
</html>


